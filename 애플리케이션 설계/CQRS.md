## CQRS

---

CQRS 패턴이란 Command and Query Responsibility Segregation(명령과 조회의 책임 분리)
즉, CQRS 패턴은 커맨드와 책임을 분리하는 패턴입니다.
책임 분리를 위해서는 코드의 모듈이 분리되어야 합니다.(어렵다.)

### CQRS 가 필요한 이유

---

전통적인 CRUD 아키텍처 기반에서 Application을 개발 및 운영하다가 보면, 자연스럽게 Model의 복잡도가 증가하고 그에 따라 유지보수의 비용이 증가하고 Model은 설계의 방향과 다르게 변질됩니다.

이러한 흐름에서, 대부분의 정책이나 제약은 데이터 변경(C, U, D)에서 처리되고, 데이터 조회(R) 작업은 단순 데이터 조회인데, 동일 Model로 처리하면 필요하지 않은 속성들로 인해 복잡도가 증가합니다.

따라서 이 문제를 해결하기 위해 명령을 처리하는 책임과 조회를 처리하는 책임을 분리하는 CQRS를 사용합니다

### CQRS의 장점

---

1. 확장성: 읽기와 쓰기 작업을 분리하면 각각을 독립적으로 확장할 수 있습니다.
   예를 들어, 읽기 작업이 쓰기 작업보다 더 자주 발생한다면 읽기 부분만 추가로 확장할 수 있습니다.

2. 성능 최적화: 읽기 모델과 쓰기 모델이 독립적이므로, 각 모델을 특정 작업에 최적화할 수 있습니다.
   예를 들어 읽기 모델을 Redis로 빠른 읽기를 기대할 수 있습니다.

3. 유연성: 각 모델을 독립적으로 변경하거나 업데이트할 수 있으므로, 시스템이 더 유연해집니다.
   새로운 읽기 요구 사항이 생기면 읽기 모델만 업데이트하면 됩니다.

### CQRS의 단점

---

1. 데이터 일관성 문제 : 읽기와 쓰기 데이터의 동기화 지연으로 인해 일시적인 불일치가 발생할 수 있습니다.

2. 설계 문제 : 쓰기와 읽기를 최적화하려면 각각에 맞는 저장소나 캐싱 전략을 따로 적용해야 할 수도 있어, 성능 튜닝이 복잡해질 수 있습니다.

3. 테스트 복잡도 증가 : 읽기와 쓰기가 분리되어 있으므로, 통합 테스트 작성이 더 복잡하고 어려울 수 있습니다.
